"use strict";function asyncGeneratorStep(e,t,n,r,a,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function _asyncToGenerator(i){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=i.apply(e,c);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}window.addEventListener("DOMContentLoaded",function(){var r=document.querySelectorAll(".tabheader__item"),n=document.querySelectorAll(".tabcontent"),e=document.querySelector(".tabheader__items");function a(){n.forEach(function(e){e.classList.add("hide"),e.classList.remove("show","fade")}),r.forEach(function(e){e.classList.remove("tabheader__item_active")})}function o(e){var t=0<arguments.length&&void 0!==e?e:0;n[t].classList.add("show","fade"),n[t].classList.remove("hide"),r[t].classList.add("tabheader__item_active")}a(),o(),e.addEventListener("click",function(e){var n=e.target;n&&n.classList.contains("tabheader__item")&&r.forEach(function(e,t){n==e&&(a(),o(t))})});var t,c,i,s,l,d,u,f;function m(e){return 0<=e&&e<10?"0"+e:e}function h(){var e,t,n,r,a,o=(e=c,t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/864e5),r=Math.floor(t/1e3%60),a=Math.floor(t/1e3/60%60),{total:t,days:n,hours:Math.floor(t/36e5%24),minutes:a,seconds:r});s.innerHTML=m(o.days),l.innerHTML=m(o.hours),d.innerHTML=m(o.minutes),u.innerHTML=m(o.seconds),o.total<=0&&clearInterval(f)}t=".timer",c="2020-12-11",i=document.querySelector(t),s=i.querySelector("#days"),l=i.querySelector("#hours"),d=i.querySelector("#minutes"),u=i.querySelector("#seconds"),f=setInterval(h,1e3),h();var v=document.querySelectorAll("[data-modal]"),g=document.querySelector(".modal");function p(){g.classList.add("hide"),g.classList.remove("show"),document.body.style.overflow=""}function y(){g.classList.add("show"),g.classList.remove("hide"),document.body.style.overflow="hidden",clearInterval(_)}v.forEach(function(e){e.addEventListener("click",y)}),g.addEventListener("click",function(e){e.target!==g&&""!=e.target.getAttribute("data-close")||p()}),document.addEventListener("keydown",function(e){"Escape"===e.code&&g.classList.contains("show")&&p()});var _=setTimeout(y,3e5);window.addEventListener("scroll",function e(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(y(),window.removeEventListener("scroll",e))});var b=function(){function l(e,t,n,r,a,o){_classCallCheck(this,l),this.src=e,this.alt=t,this.title=n,this.descr=r,this.price=a;for(var c=arguments.length,i=new Array(6<c?c-6:0),s=6;s<c;s++)i[s-6]=arguments[s];this.classes=i,this.parent=document.querySelector(o),this.transfer=27,this.changeToUAH()}return _createClass(l,[{key:"changeToUAH",value:function(){this.price=this.price*this.transfer}},{key:"render",value:function(){var t=document.createElement("div");0===this.classes.length?(this.classes="menu__item",t.classList.add(this.classes)):this.classes.forEach(function(e){return t.classList.add(e)}),t.innerHTML="\n                <img src=".concat(this.src," alt=").concat(this.alt,'>\n                <h3 class="menu__item-subtitle">').concat(this.title,'</h3>\n                <div class="menu__item-descr">').concat(this.descr,'</div>\n                <div class="menu__item-divider"></div>\n                <div class="menu__item-price">\n                    <div class="menu__item-cost">Цена:</div>\n                    <div class="menu__item-total"><span>').concat(this.price,"</span> грн/день</div>\n                </div>\n            "),this.parent.append(t)}}]),l}();(function(e){return q.apply(this,arguments)})("http://localhost:3000/menu").then(function(e){e.forEach(function(e){var t=e.img,n=e.altimg,r=e.title,a=e.descr,o=e.price;new b(t,n,r,a,o,".menu .container").render()})});var x=document.querySelectorAll("form"),L="img/form/spinner.svg",w="Спасибо! Скоро мы с вами свяжемся",S="Что-то пошло не так...";x.forEach(function(e){var a;(a=e).addEventListener("submit",function(e){e.preventDefault();var t=document.createElement("img");t.src=L,t.style.cssText="\n                display: block;\n                margin: 0 auto;\n            ",a.insertAdjacentElement("afterend",t);var n=new FormData(a),r=JSON.stringify(Object.fromEntries(n.entries()));E("http://localhost:3000/requests",r).then(function(e){console.log(e),k(w),t.remove()}).catch(function(){k(S)}).finally(function(){a.reset()})})});var E=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:n});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}();function q(){return(q=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){var t=document.querySelector(".modal__dialog");t.classList.add("hide"),y();var n=document.createElement("div");n.classList.add("modal__dialog"),n.innerHTML='\n            <div class="modal__content">\n                <div class="modal__close" data-close>×</div>\n                <div class="modal__title">'.concat(e,"</div>\n            </div>\n        "),document.querySelector(".modal").append(n),setTimeout(function(){n.remove(),t.classList.add("show"),t.classList.remove("hide"),p()},4e3)}var A=0,C=1,T=document.querySelectorAll(".offer__slide"),I=document.querySelector(".offer__slider"),M=document.querySelector(".offer__slider-prev"),H=document.querySelector(".offer__slider-next"),D=document.querySelector("#total"),j=document.querySelector("#current"),P=document.querySelector(".offer__slider-wrapper"),G=window.getComputedStyle(P).width,O=document.querySelector(".offer__slider-inner");T.length<10?(D.textContent="0".concat(T.length),j.textContent="0".concat(C)):(D.textContent=T.length,j.textContent=C),O.style.width=100*T.length+"%",O.style.display="flex",O.style.transition="0.5s all",P.style.overflow="hidden",T.forEach(function(e){e.style.width=G}),I.style.position="relative";var R=document.createElement("ol"),X=[];R.classList.add("carousel-indicators"),R.style.cssText="\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        z-index: 15;\n        display: flex;\n        justify-content: center;\n        margin-right: 15%;\n        margin-left: 15%;\n        list-style: none;\n    ",I.append(R);for(var z=0;z<T.length;z++){var U=document.createElement("li");U.setAttribute("data-slide-to",z+1),U.style.cssText="\n            box-sizing: content-box;\n            flex: 0 1 auto;\n            width: 30px;\n            height: 6px;\n            margin-right: 3px;\n            margin-left: 3px;\n            cursor: pointer;\n            background-color: #fff;\n            background-clip: padding-box;\n            border-top: 10px solid transparent;\n            border-bottom: 10px solid transparent;\n            opacity: .5;\n            transition: opacity .6s ease;\n        ",0==z&&(U.style.opacity=1),R.append(U),X.push(U)}function F(e){return+e.replace(/\D/g,"")}H.addEventListener("click",function(){A==F(G)*(T.length-1)?A=0:A+=F(G),O.style.transform="translateX(-".concat(A,"px)"),C==T.length?C=1:C++,T.length<10?j.textContent="0".concat(C):j.textContent=C,X.forEach(function(e){return e.style.opacity=".5"}),X[C-1].style.opacity=1}),M.addEventListener("click",function(){0==A?A=F(G)*(T.length-1):A-=F(G),O.style.transform="translateX(-".concat(A,"px)"),1==C?C=T.length:C--,T.length<10?j.textContent="0".concat(C):j.textContent=C,X.forEach(function(e){return e.style.opacity=".5"}),X[C-1].style.opacity=1}),X.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.getAttribute("data-slide-to");C=t,A=F(G)*(t-1),O.style.transform="translateX(-".concat(A,"px)"),T.length<10?j.textContent="0".concat(C):j.textContent=C,X.forEach(function(e){return e.style.opacity=".5"}),X[C-1].style.opacity=1})});var J,N,Y,B,K,Q=document.querySelector(".calculating__result span");function V(){Q.textContent=J&&N&&Y&&B&&K?"female"===J?Math.round((447.6+9.2*Y+3.1*N-4.3*B)*K):Math.round((88.36+13.4*Y+4.8*N-5.7*B)*K):"____"}function W(e,t){document.querySelectorAll(e).forEach(function(e){e.classList.remove(t),e.getAttribute("id")===localStorage.getItem("sex")&&e.classList.add(t),e.getAttribute("data-ratio")===localStorage.getItem("ratio")&&e.classList.add(t)})}function Z(e,t){var n=document.querySelectorAll(e);n.forEach(function(e){e.addEventListener("click",function(e){e.target.getAttribute("data-ratio")?(K=+e.target.getAttribute("data-ratio"),localStorage.setItem("ratio",+e.target.getAttribute("data-ratio"))):(J=e.target.getAttribute("id"),localStorage.setItem("sex",e.target.getAttribute("id"))),n.forEach(function(e){e.classList.remove(t)}),e.target.classList.add(t),V()})})}function $(e){var t=document.querySelector(e);t.addEventListener("input",function(){switch(t.value.match(/\D/g)?t.style.border="1px solid red":t.style.border="none",t.getAttribute("id")){case"height":N=+t.value;break;case"weight":Y=+t.value;break;case"age":B=+t.value}V()})}localStorage.getItem("sex")?J=localStorage.getItem("sex"):(J="female",localStorage.setItem("sex","female")),localStorage.getItem("ratio")?K=localStorage.getItem("ratio"):(K=1.375,localStorage.setItem("ratio",1.375)),V(),W("#gender div","calculating__choose-item_active"),W(".calculating__choose_big div","calculating__choose-item_active"),Z("#gender div","calculating__choose-item_active"),Z(".calculating__choose_big div","calculating__choose-item_active"),$("#height"),$("#weight"),$("#age")});