"use strict";function asyncGeneratorStep(e,t,n,r,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(r,o)}function _asyncToGenerator(s){return function(){var e=this,c=arguments;return new Promise(function(t,n){var r=s.apply(e,c);function o(e){asyncGeneratorStep(r,t,n,o,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,o,a,"throw",e)}o(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}window.addEventListener("DOMContentLoaded",function(){var r=document.querySelectorAll(".tabheader__item"),n=document.querySelectorAll(".tabcontent"),e=document.querySelector(".tabheader__items");function o(){n.forEach(function(e){e.classList.add("hide"),e.classList.remove("show","fade")}),r.forEach(function(e){e.classList.remove("tabheader__item_active")})}function a(e){var t=0<arguments.length&&void 0!==e?e:0;n[t].classList.add("show","fade"),n[t].classList.remove("hide"),r[t].classList.add("tabheader__item_active")}o(),a(),e.addEventListener("click",function(e){var n=e.target;n&&n.classList.contains("tabheader__item")&&r.forEach(function(e,t){n==e&&(o(),a(t))})});var t,c,s,i,l,d,u,f;function m(e){return 0<=e&&e<10?"0"+e:e}function h(){var e,t,n,r,o,a=(e=c,t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/864e5),r=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),{total:t,days:n,hours:Math.floor(t/36e5%24),minutes:o,seconds:r});i.innerHTML=m(a.days),l.innerHTML=m(a.hours),d.innerHTML=m(a.minutes),u.innerHTML=m(a.seconds),a.total<=0&&clearInterval(f)}t=".timer",c="2021-05-11",s=document.querySelector(t),i=s.querySelector("#days"),l=s.querySelector("#hours"),d=s.querySelector("#minutes"),u=s.querySelector("#seconds"),f=setInterval(h,1e3),h();var v=document.querySelectorAll("[data-modal]"),p=document.querySelector(".modal");function y(){p.classList.add("hide"),p.classList.remove("show"),document.body.style.overflow=""}function g(){p.classList.add("show"),p.classList.remove("hide"),document.body.style.overflow="hidden",clearInterval(_)}v.forEach(function(e){e.addEventListener("click",g)}),p.addEventListener("click",function(e){e.target!==p&&""!=e.target.getAttribute("data-close")||y()}),document.addEventListener("keydown",function(e){"Escape"===e.code&&p.classList.contains("show")&&y()});var _=setTimeout(g,3e5);window.addEventListener("scroll",function e(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(g(),window.removeEventListener("scroll",e))});(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}})()("http://localhost:3000/menu").then(function(e){e.forEach(function(e){var t=e.img,n=e.altimg,r=e.title,o=e.descr,a=e.price,c=document.createElement("div");c.classList.add("menu__item"),c.innerHTML="\n            <img src=".concat(t," alt=").concat(n,'>\n            <h3 class="menu__item-subtitle">').concat(r,'</h3>\n            <div class="menu__item-descr">').concat(o,'</div>\n            <div class="menu__item-divider"></div>\n            <div class="menu__item-price">\n                <div class="menu__item-cost">Цена:</div>\n                <div class="menu__item-total"><span>').concat(a,"</span> грн/день</div>\n            </div>\n            "),document.querySelector(".menu .container").append(c)})});var w=document.querySelectorAll("form"),x="images/form/spinner.svg",b="Спасибо! Скоро мы с вами свяжемся",L="Что-то пошло не так...";w.forEach(function(e){var o;(o=e).addEventListener("submit",function(e){e.preventDefault();var t=document.createElement("img");t.src=x,t.style.cssText="\n                display: block;\n                margin: 0 auto;\n            ",o.insertAdjacentElement("afterend",t);var n=new FormData(o),r=JSON.stringify(Object.fromEntries(n.entries()));console.log(Object.entries({a:23,b:50})),E("http://localhost:3000/requests",r).then(function(e){console.log(e),S(b),t.remove()}).catch(function(){S(L)}).finally(function(){o.reset()})})});var E=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:n});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}();function S(e){var t=document.querySelector(".modal__dialog");t.classList.add("hide"),g();var n=document.createElement("div");n.classList.add("modal__dialog"),n.innerHTML='\n            <div class="modal__content">\n                <div class="modal__close" data-close>×</div>\n                <div class="modal__title">'.concat(e,"</div>\n            </div>\n        "),document.querySelector(".modal").append(n),setTimeout(function(){n.remove(),t.classList.add("show"),t.classList.remove("hide"),y()},4e3)}var q=document.querySelectorAll(".offer__slide"),C=document.querySelector(".offer__slider"),T=document.querySelector(".offer__slider-prev"),k=document.querySelector(".offer__slider-next"),M=document.querySelector("#total"),j=document.querySelector("#current"),A=document.querySelector(".offer__slider-wrapper"),H=document.querySelector(".offer__slider-inner"),O=window.getComputedStyle(A).width,P=1,D=0;q.length<10?(M.textContent="0".concat(q.length),j.textContent="0".concat(P)):(M.textContent=q.length,j.textContent=P),H.style.width=100*q.length+"%",H.style.display="flex",H.style.transition="0.5s all",A.style.overflow="hidden",q.forEach(function(e){e.style.width=O}),C.style.position="relative";var G=document.createElement("ol"),R=[];G.classList.add("carousel-indicators"),G.style.cssText="\n            position: absolute;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            z-index: 15;\n            display: flex;\n            justify-content: center;\n            margin-right: 15%;\n            margin-left: 15%;\n            list-style: none;\n        ",C.append(G);for(var I=0;I<q.length;I++){var X=document.createElement("li");X.setAttribute("data-slide-to",I+1),X.style.cssText="\n            box-sizing: content-box;\n            flex: 0 1 auto;\n            width: 30px;\n            height: 6px;\n            margin-right: 3px;\n            margin-left: 3px;\n            cursor: pointer;\n            background-color: #fff;\n            background-clip: padding-box;\n            border-top: 10px solid transparent;\n            border-bottom: 10px solid transparent;\n            opacity: .5;\n            transition: opacity .6s ease;\n        ",0==I&&(X.style.opacity=1),G.append(X),R.push(X)}k.addEventListener("click",function(){D==O.slice(0,O.length-2)*(q.length-1)?D=0:D+=+O.slice(0,O.length-2),H.style.transform="translateX(-".concat(D,"px)"),P==q.length?P=1:P++,q.length<10?j.textContent="0".concat(P):j.textContent=P,R.forEach(function(e){return e.style.opacity=".5"}),R[P-1].style.opacity=1}),T.addEventListener("click",function(){0==D?D=O.slice(0,O.length-2)*(q.length-1):D-=+O.slice(0,O.length-2),H.style.transform="translateX(-".concat(D,"px)"),1==P?P=q.length:P--,q.length<10?j.textContent="0".concat(P):j.textContent=P,R.forEach(function(e){return e.style.opacity=".5"}),R[P-1].style.opacity=1}),R.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.getAttribute("data-slide-to");P=t,D=O.slice(0,O.length-2)*(t-1),H.style.transform="translateX(-".concat(D,"px)"),q.length<10?j.textContent="0".concat(P):j.textContent=P,R.forEach(function(e){return e.style.opacity=".5"}),R[P-1].style.opacity=1})}),fetch("http://localhost:3000/menu").then(function(e){return e.json()}).then(function(e){return console.log(e)})});